  <!DOCTYPE html>
  <html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Gestor de Unidade Militar</title>
  <!--  <link rel="stylesheet" href="estilo.css">-->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">


  <!-- stilos copiados de fora pra dentro-->
  <style>
    /* === LOGIN === */
  #login-overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.75);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }

  #login-box {
    background: #fff;
    padding: 30px 40px;
    border-radius: 8px;
    box-shadow: 0 0 15px rgba(0,0,0,0.3);
    width: 320px;
    text-align: center;
    font-family: 'Roboto', sans-serif;
  }

  #login-box h2 {
    margin-bottom: 20px;
  }

  #login-box input[type="text"],
  #login-box input[type="password"] {
    width: 100%;
    padding: 12px 10px;
    margin-bottom: 15px;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 16px;
    box-sizing: border-box;
  }

  #login-box button {
    width: 100%;
    padding: 12px;
    background-color: #007bff;
    border: none;
    border-radius: 5px;
    color: white;
    font-size: 18px;
    cursor: pointer;
  }

  #login-box button:hover {
    background-color: #0056b3;
  }

  #login-error {
    color: red;
    margin-bottom: 15px;
    min-height: 20px;
  }

  /* BLOQUEIO DO CONTE√öDO QUANDO N√ÉO LOGADO */
  body.locked header,
  body.locked main,
  body.locked footer {
    filter: blur(2px);
    pointer-events: none;
    user-select: none;
    opacity: 0.5;
  }

  /* BOT√ÉO SAIR */
  #logout-btn {
    position: fixed;
    top: 15px;
    right: 15px;
    background: #dc3545;
    color: white;
    border: none;
    padding: 8px 15px;
    font-size: 14px;
    border-radius: 4px;
    cursor: pointer;
    z-index: 1000;
    display: none;
  }

  #logout-btn:hover {
    background: #b02a37;
  }


  /* === GERAL === */
  body {
    font-family: 'Roboto', Arial, sans-serif;
    background-color: #f4f4f4;
    color: #333;
    margin: 0;
    padding: 0;
  }

  header {
    background-color: #0077cc;
    color: white;
    padding: 20px;
    text-align: center;
  }

  header h1 {
    margin: 0;
  }

  .navbar {
    position: relative;
  }

  .menu-toggle {
    display: none;
    font-size: 28px;
    cursor: pointer;
    position: absolute;
    top: 20px;
    right: 20px;
  }

  .nav-list {
    list-style: none;
    padding: 0;
    margin: 20px 0 0 0;
  }

  .nav-list li {
    display: inline-block;
    margin: 0 10px;
  }

  .nav-list li a {
    color: white;
    text-decoration: none;
    font-weight: bold;
  }

  main {
    max-width: 1000px;
    margin: 30px auto 80px auto;
    background: white;
    padding: 30px;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }

  button {
    background-color: #0077cc;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
  }

  button:hover {
    background-color: #005fa3;
  }

  footer {
    background-color: #333;
    color: white;
    text-align: center;
    padding: 15px;
    position: fixed;
    width: 100%;
    bottom: 0;
  }

  .content {
    display: none;
  }

  .content.active {
    display: block;
  }


  /* === FORMUL√ÅRIOS === */
  form {
    max-width: 600px;
  }

  label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
  }

  input[type="text"],
  input[type="date"],
  input[type="number"],
  textarea {
    width: 100%;
    padding: 8px 10px;
    margin: 5px 0 15px 0;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
    font-size: 14px;
  }

  textarea {
    min-height: 100px;
    resize: vertical;
  }

  form button {
    background-color: #0077cc;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 15px;
  }

  form button:hover {
    background-color: #005fa3;
  }


  /* === RESPONSIVO === */
  @media (max-width: 768px) {
    .menu-toggle {
      display: block;
    }

    .nav-list {
      display: none;
      flex-direction: column;
      background-color: #0077cc;
      position: absolute;
      width: 100%;
      top: 60px;
      left: 0;
      text-align: center;
    }

    .nav-list.active {
      display: flex;
    }

    .nav-list li {
      display: block;
      margin: 10px 0;
    }

    .form-buttons {
      margin-top: 10px;
    }

    .form-buttons button {
      margin-right: 10px;
      margin-bottom: 5px;
    }
  }

  </style>
  <!-- fim do stilos-->
 <!-- Carrega a biblioteca jsPDF (UMD) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" crossorigin="anonymous"></script>

  </head>







  <body class="locked">




    
    <!-- Overlay de Login -->
    <div id="login-overlay">
      <div id="login-box">
        <h2>Login do Sistema</h2>
        <div id="login-error"></div>
        <input type="text" id="login-user" placeholder="Usu√°rio" autocomplete="off" />
        <input type="password" id="login-pass" placeholder="Senha" autocomplete="off" />
        <button onclick="fazerLogin()">Entrar</button>
      </div>
    </div>

    <button id="logout-btn" onclick="logout()">Sair</button>

    <header>
      <h1>Gestor de Unidade Militar</h1>
      <nav class="navbar">
        <div class="menu-toggle" id="mobile-menu">&#9776;</div>
        <ul class="nav-list">
          <li><a href="#" data-section="inicio">In√≠cio</a></li>
          <li><a href="#" data-section="livrodiario">Livro Diario</a></li>
          <li><a href="#" data-section="unidade">Unidade Militar</a></li>
          <li><a href="#" data-section="efetivo">Efetivo</a></li>
          <li><a href="#" data-section="viaturas">Viaturas</a></li>
          <li><a href="#" data-section="material">Material B√©lico</a></li>
          <li><a href="#" data-section="escala_ord">Escala Ordin√°ria</a></li>
          <li><a href="#" data-section="escala_ext">Escala Extraordin√°ria</a></li>
  <!--        <li><a href="#" data-section="atividade">Atividade Externa</a></li>
          <li><a href="#" data-section="audiencia">Audi√™ncia</a></li> -->
        </ul>
      </nav>
    </header>

    <main>



      
      <!-- Conte√∫do das se√ß√µes -->
      <section id="inicio" class="content active">
        <h2>In√≠cio</h2>
        <p>Bem-vindo ao sistema de gest√£o de Unidade Militar.</p>
      </section>

      <section id="livrodiario" class="content">
        <h2>NUCLEO DE POLICIA MILITAR DE DENISE</h2>
        <p>Gerador de livro de servi√ßo di√°rio... Em teste...</p>

        <form>
            
          <div>
          <div style="display:flex; gap:20px;">
    <div style="flex:1;">

            <label for="data_inicio">Servi√ßo do dia</label>
            <input type="date" id="data_inicio" name="data_inicio">
          </div>

    <div style="flex:1;">

            
            <label for="data_fim">Para o dia</label>
            <input type="date" id="data_fim" name="data_fim">
          </div>
          
            <div style="flex:1;">
            
            <label for="datalivro">Impresso em</label>
            <input type="date" id="datalivro" name="datalivro">
          </div>
  </div>
          
  <div>
        <label for="recebi_servico">Recebi o servi√ßo do</label>
        <select id="recebi_servico" name="recebi_servico" class="lista-militares">
          <option value="">Selecione...</option>
        </select>
      </div>

      <div>
        <div style="display:flex; gap:20px;">
    <div style="flex:1;">
        <label for="cmt_sv">Cmt de GU SV</label>
        <select id="cmt_sv" name="cmt_sv" class="lista-militares">
          <option value="">Selecione...</option>
F        </select>
      </div>

      <div style="flex:1;">
        <label for="motorista">Motorista</label>
        <select id="motorista" name="motorista" class="lista-militares">
          <option value="">Selecione...</option>
        </select>
      </div>
  </div>

          <div>
            <div style="display:flex; gap:20px;">
              <div style="flex:1;">
        <label for="3HOMEM">3¬∫ HOMEM</label>
        <select id="3HOMEM" name="3HOMEM" class="lista-militares">
          <option value="">Selecione...</option>
        </select>
      </div>

          <div style="flex:1;">
        <label for="4HOMEM">4¬∫ HOMEM</label>
        <select id="4HOMEM" name="4HOMEM" class="lista-militares">
          <option value="">Selecione...</option>
        </select>
      </div>
  </div>
  <br>
          <div>
            <div style="display:flex; gap:20px;">
    <div style="flex:1;">
            <label for="vtr">VTR</label>
            <select id="vtr" name="vtr">
              <option value="">Selecione...</option>
              <option value="KICKS SPN9E23">KICKS SPN9E23</option>
              <option value="l200 SPC7E90">L200 SPC7E90</option>
            </select>
          </div>

        
    <div style="flex:1;">
      <label for="km_inicial">KM Inicial</label>
      <input type="number" id="km_inicial" name="km_inicial" value ="S/A">
    </div>

    <div style="flex:1;">
      <label for="km_final">KM Final</label>
      <input type="number" id="km_final" name="km_final" value ="S/A">
    </div>
    <div>
            <label for="abastecimento">Qtd de abastecimento em Litros</label>
            <input type="number" id="abastecimento" name="abastecimento" value ="S/A">
          </div>

  </div>
        
          <div>
            <label for="local_abastecimento">Local de Abastecimento</label>
            <input type="text" id="local_abastecimento" name="local_abastecimento" value ="S/A">
          </div>

          <div>
            <label for="ocorrencia">Ocorr√™ncia</label>
            <textarea id="ocorrencia" name="ocorrencia">S/A</textarea>
          </div>

          <div>
            <label for="tco">TCO - Lavrado</label>
            <textarea id="tco" name="tco">S/A</textarea>
          </div>

          <div>
           <div style="display: flex; align-items: center; gap: 10px;">
  <label for="material">Material carga dispon√≠vel para o servi√ßo</label>
  
</div>
            <textarea id="material" name="material">
02 ESPINGARDA GALGE CAL 12, COM 50 MUNI√á√ïES LETAIS E 33 MUNI√á√ïES ANTI-MOTIN. 01 FUZIL CALIBRE 556, COM 100 MUNI√á√ïES, 01 FUZIL CALIBRE 300 BLK COM 250 MUNI√á√ïES. 01 ESPARGIDOR DE PIMENTA. 01 PISTOLA TESAR COM DOIS DARDOS. 05 RADIO PORTATIL HT E 10 CONES DE SINALIZA√á√ÉO.
</textarea>


          </div>

          <div>
            <label for="apreensoes">Apreens√µes</label>
            <textarea id="apreensoes" name="apreensoes">S/A</textarea>
          </div>

          <div>
            <label for="notificacoes">Notifica√ß√µes</label>
            <textarea id="notificacoes" name="notificacoes">S/A</textarea>
          </div>

          <div>
            <label for="apresentacoes">Apresenta√ß√µes, Extraordin√°ria e Outros</label>
            <textarea id="apresentacoes" name="apresentacoes">S/A</textarea>
          </div>

          <div>
            <label for="observacoes">Observa√ß√µes</label>
            <textarea id="observacoes" name="observacoes">S/A</textarea>
          </div>

          <div>
        <label for="passagem_select">Passo o servi√ßo para o</label>
        <select id="passagem_select" name="passagem_select" class="lista-militares">
          <option value="">Selecione...</option>
        </select>
      </div>


      <div>
            <label for="passagem_texto">Descri√ß√£o do texto para passagem de servi√ßo</label>
            <textarea id="passagem_texto" name="passagem_texto"></textarea>
          </div>

<button type="button" id="reset-material">Resetar dados Original de Config....</button>

<style>
  #reset-material {
    position: fixed;
    top: 150px;        /* dist√¢ncia do topo */
    right: 80px;      /* dist√¢ncia da direita */
    z-index: 9999;    /* garante que fique acima de outros elementos */
    
    /* Estilo opcional para visualiza√ß√£o */
    padding: 10px 16px;
    background-color: #e74c3c;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  }

  #reset-material:hover {
    background-color: #c0392b;
  }
</style>



  <script>
    // Evento para preencher o textarea quando selecionar um militar
    document.getElementById("passagem_select").addEventListener("change", function () {
      const selecionado = this.options[this.selectedIndex].text; // pega o texto vis√≠vel do select
      if (selecionado) {
        document.getElementById("passagem_texto").value =
          `Passo o servi√ßo ao ${selecionado}, com todas as ordens em vigor e altera√ß√µes anotadas!`;
      } else {
        document.getElementById("passagem_texto").value = "";
      }
    });
  </script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const materialEl = document.getElementById('material');
    const resetBtn = document.getElementById('reset-material');

    // Armazenar o valor original ao carregar a p√°gina
    const valorOriginalMaterial = materialEl.textContent.trim();

    resetBtn.addEventListener('click', () => {
      if (confirm("Deseja restaurar o texto original dos campos")) {
        materialEl.value = valorOriginalMaterial;
document.getElementById('ocorrencia').value = "S/A"
document.getElementById('km_inicial').value = "S/A"
document.getElementById('km_final').value = "S/A"
document.getElementById('abastecimento').value = "S/A"
document.getElementById('local_abastecimento').value = "S/A"
document.getElementById('tco').value = "S/A"
document.getElementById('apreensoes').value = "S/A"
document.getElementById('notificacoes').value = "S/A"
document.getElementById('apresentacoes').value = "S/A"
document.getElementById('observacoes').value = "S/A"


        // Atualiza o localStorage tamb√©m (se voc√™ estiver usando store autom√°tico)
        const storageKey = "form_livrodiario";
        const dadosSalvos = JSON.parse(localStorage.getItem(storageKey) || '{}');
        dadosSalvos['material'] = valorOriginalMaterial;
        localStorage.setItem(storageKey, JSON.stringify(dadosSalvos));
      }
    });
  });
</script>




  <br>
         <!-- <button type="submit">Salvar</button>-->









<!--COME√áO PDF                                               PDF -->

<h1>Gerar o livro em PDFF</h1>

  <button onclick="gerarPDF()">Gerar PDF</button>

  <br>
  <br>



  <script>
    function gerarPDF() {
      // Checa se a lib carregou
      if (!window.jspdf || !window.jspdf.jsPDF) {
        alert("Falha ao carregar jsPDF. Verifique a conex√£o ou o script de importa√ß√£o.");
        return;
      }

      const { jsPDF } = window.jspdf;
      const doc = new jsPDF("p", "mm", "a4");

      // Cabe√ßalho
        function adicionarCabecalho() {
                const img = new Image();
            img.src = 'https://upload.wikimedia.org/wikipedia/commons/7/7f/Bras%C3%A3o_PMMT.PNG';
            doc.addImage(img, 'PNG', 93, 5, 20, 20);
            doc.setFont("helvetica", "bold");
            doc.setFontSize(12);

      doc.text("POL√çCIA MILITAR DO ESTADO DE MATO GROSSO", 105, 30, { align: "center" });
      doc.text("COMANDO REGIONAL VII - M√âDIO NORTE", 105, 35, { align: "center" });
      doc.text("12¬™ CIPM - BARRA DO BUGRES", 105, 40, { align: "center" });
      doc.text("NUCLEO DE POLICIA MILITAR DE DENISE", 105, 45, { align: "center" });
     

        }


  function adicionarRodape() { // Rodap√©
         doc.setFontSize(8);          
            

//doc.line(170, 280, 200, 280);

      doc.setFont("helvetica", "normal");
      doc.text("NUCLEO DE POLICIA MILITAR DE DENISE", 105, 285, { align: "center" });
      doc.text("Rua Piaui - Bairro Centro - Denise-MT - CEP 78.380-000", 105, 288, { align: "center" });
      doc.text("Fone: (65) 98170-0447 | E-mail: npmdenise@pm.mt.gov.br", 105, 291, { align: "center" });
    }




const select1 = document.getElementById("recebi_servico");
const textoSelecionadoRecebimento = select1.options[select1.selectedIndex].text;

const select2 = document.getElementById("cmt_sv");
const textoSelecionadoCmtsv = select2.options[select2.selectedIndex].text;

const select3 = document.getElementById("motorista");
const textoSelecionadoMot = select3.options[select3.selectedIndex].text;

const select4 = document.getElementById("3HOMEM");
const textoSelecionado3Hom = select4.options[select4.selectedIndex].text;

const select5 = document.getElementById("4HOMEM");
const textoSelecionado4Hom = select5.options[select5.selectedIndex].text;

const select6 = document.getElementById("vtr");
const textoSelecionadoVtr = select6.options[select6.selectedIndex].text;

const km_inicial = document.getElementById("km_inicial").value
const km_final = document.getElementById("km_final").value
const abastecimento = document.getElementById("abastecimento").value
const local_abastecimento = document.getElementById("local_abastecimento").value
const ocorrencia = document.getElementById("ocorrencia").value
const tco = document.getElementById("tco").value
const material = document.getElementById("material").value
const apreensoes = document.getElementById("apreensoes").value
const notificacoes = document.getElementById("notificacoes").value
const apresentacoes = document.getElementById("apresentacoes").value
const observacoes = document.getElementById("observacoes").value
const passagem_texto = document.getElementById("passagem_texto").value

const datainicio = document.getElementById("data_inicio").value
const datafim = document.getElementById("data_fim").value




const dataStr = document.getElementById("data_inicio").value; // "2025-08-12"
const [ano, mes, dia] = dataStr.split("-").map(Number);

// Criar data corretamente no fuso local
const dataObj = new Date(ano, mes - 1, dia); // M√™s come√ßa do 0 (janeiro)

// Formatar: "12 de agosto de 2025"
const dataFormatada = new Intl.DateTimeFormat("pt-BR", {
  day: "numeric",
  month: "long",
  year: "numeric"
}).format(dataObj);

const diasSemana = [
  "domingo",
  "segunda-feira",
  "ter√ßa-feira",
  "quarta-feira",
  "quinta-feira",
  "sexta-feira",
  "s√°bado"
];

const diaSemana = diasSemana[dataObj.getDay()];
//console.log(diaSemana);  // ex: "ter√ßa-feira"

//console.log(dataFormatada);




const dataStrfim = document.getElementById("data_fim").value; // "2025-08-12"
const [anofim, mesfim, diafim] = dataStrfim.split("-").map(Number);

// Criar data corretamente no fuso local
const dataObjfim = new Date(anofim, mesfim - 1, diafim); // M√™s come√ßa do 0 (janeiro)

// Formatar: "12 de agosto de 2025"
const dataFormatadafim = new Intl.DateTimeFormat("pt-BR", {
  day: "numeric",
  month: "long",
  year: "numeric"
}).format(dataObjfim);

const diaSemanafim = diasSemana[dataObjfim.getDay()];
//console.log(diaSemana);  // ex: "ter√ßa-feira"

//console.log(dataFormatada);

//console.log(dataFormatada);




         adicionarCabecalho()
         adicionarRodape()
      // Conte√∫do

      let coluna1 = 8
      let coluna2 =202


      //linha do rodape
doc.line(coluna1, 281, coluna2, 281);
      // fim da linha do rodape

doc.line(coluna1, 50, coluna1, 281);
doc.line(coluna2, 50, coluna2, 281);


//doc.line(coluna1+7, 56, coluna1+7, 281);


      //----

doc.line(174, 37, coluna2, 37);
doc.line(174, 7, coluna2, 7);

doc.line(176, 15, 198, 15);
//doc.text("DATA", 180, 18, );
doc.text("DATA", 184, 18, { maxWidth: 170, align: 'justify'});

doc.line(176, 30, 198, 30);
//doc.text("DATA", 180, 18, );
doc.text("VISTO CMD", 180, 33, { maxWidth: 170, align: 'justify'});


doc.line(174, 7, 174, 37);
doc.line(coluna2, 7, coluna2, 37);



doc.setFontSize(9);
      doc.setFont("helvetica", "normal");


      let linha = 50
      let iniciotextolinha = 16

 doc.line(coluna1, linha, coluna2, linha);     

linha = linha+4
 doc.setFont("helvetica", "bold");
doc.text(`SERVI√áO DO DIA ${dataFormatada.toUpperCase()} - ${diaSemana.toUpperCase()} PARA O DIA ${dataFormatadafim.toUpperCase()} - ${diaSemanafim.toUpperCase()}`, 105, linha, { align: "center" });
linha = linha+2
doc.line(coluna1, linha, coluna2, linha);


//if (textoSelecionadoRecebimento !== "Selecione...") {
linha = linha+4
 doc.setFont("helvetica", "normal");
doc.text(`| RECEBI O SERVI√áO DO: ${textoSelecionadoRecebimento}`, iniciotextolinha, linha, );
doc.text("01", 10, linha);
linha = linha+2
doc.line(coluna1, linha, coluna2, linha);
doc.line(coluna1+7, linha-6, coluna1+7, linha);

//if (textoSelecionadoCmtsv !== "Selecione...") {
linha = linha+4
doc.text(`02                                       | CMT DE GU SV: ${textoSelecionadoCmtsv}`, 10, linha, );
doc.text("ESCALA DE",16, linha,);
doc.text("SERVI√áO 24",16, linha +3,);
doc.text("HORAS",16, linha +6,);
linha = linha+2
doc.line(coluna1+40, linha-6, coluna1+40, linha+6);
doc.line(coluna1+7, linha-6, coluna1+7, linha);


linha = linha+4
if (textoSelecionadoMot !== "Selecione...") {
doc.text(`      | MOTORISTA: ${textoSelecionadoMot}`, 43, linha, );
}
linha = linha+2
//doc.line(coluna1, linha, coluna2, linha);
doc.line(coluna1+7, linha-6, coluna1+7, linha);
doc.line(coluna1+40, linha-6, coluna1+40, linha);


if (textoSelecionado3Hom !== "Selecione...") {
linha = linha+4
doc.text(`      | 3¬∫ HOMEM: ${textoSelecionado3Hom}`, 43, linha, );
linha = linha+2
//doc.line(coluna1, linha, coluna2, linha);
doc.line(coluna1+7, linha-6, coluna1+7, linha);
doc.line(coluna1+40, linha-6, coluna1+40, linha);
}

if (textoSelecionado4Hom !== "Selecione...") {
linha = linha+4
doc.text(`      | 4¬™ HOMEM: ${textoSelecionado4Hom}`, 43, linha, );
doc.line(coluna1+7, linha-6, coluna1+7, linha);
doc.line(coluna1+40, linha-6, coluna1+40, linha+2);
linha = linha+2

}
doc.line(coluna1, linha, coluna2, linha);


//if (textoSelecionadoVtr !== "Selecione...") {
linha = linha+4

doc.text(`| VTR: ${textoSelecionadoVtr}`, iniciotextolinha, linha, );
doc.text("03", 10, linha);
//doc.setFont("helvetica", "normal");
//doc.text(" * | VTR: ", 12, linha);

//doc.setFont("helvetica", "bold");
//doc.text(textoSelecionadoVtr, doc.getTextWidth(" * | VTR: ") + 12, linha);

doc.setFont("helvetica", "normal"); // volta ao normal, se necess√°rio

doc.text(` * | KM INICIAL: ${km_inicial}`, 80, linha, );
doc.text(` * | KM FINAL: ${km_final}`, 150, linha, );
linha = linha+2
doc.line(coluna1, linha, coluna2, linha);
doc.line(coluna1+7, linha-6, coluna1+7, linha);



linha = linha+4
doc.text(`| QTD DE ABASTECIMENTO EM LITROS: ${abastecimento}`, iniciotextolinha, linha, );
doc.text("04", 10, linha);
doc.text(` | LOCAL DE ABASTECIMENTO: ${local_abastecimento}`, 100, linha, );
linha = linha+2
doc.line(coluna1, linha, coluna2, linha);
doc.line(coluna1+7, linha-6, coluna1+7, linha);

// OCORENCIAS INICIO

let largura = coluna2 - coluna1 ;

linha = linha + 4;

let texto =`| OCORRENCIAS: ${ocorrencia}`;


// quebra o texto automaticamente
let linhasTexto = doc.splitTextToSize(texto, largura);

// escreve o texto (ele j√° distribui nas linhas)
doc.text(linhasTexto, iniciotextolinha, linha);
doc.text("05", 10, linha);

// ajusta a vari√°vel "linha" para depois do texto
linha += linhasTexto.length * 3; // 2 = altura aproximada de cada linha


linha = linha+2
doc.line(coluna1, linha, coluna2, linha);
doc.line(coluna1+7, linha-6*3, coluna1+7, linha);

// OCORENCIAS FIM

// TCO INICIO


linha = linha + 4;

let textoTCO =`| TCO LAVRADO: ${tco}`;


// quebra o texto automaticamente
let linhasTextoTCO = doc.splitTextToSize(textoTCO, largura);

// escreve o texto (ele j√° distribui nas linhas)
doc.text(linhasTextoTCO, iniciotextolinha, linha);
doc.text("06", 10, linha);

// ajusta a vari√°vel "linha" para depois do texto
linha += linhasTextoTCO.length * 3; // 2 = altura aproximada de cada linha


linha = linha+2
doc.line(coluna1, linha, coluna2, linha);
doc.line(coluna1+7, linha-6*3, coluna1+7, linha);


// TCO FIM 

// INICIO MATERIAL CARGA


linha = linha + 4;
let materiapadrao = "01 GALGE CAL 12 No P-47761-FRANCHI; GALGE 12 NoC1575042S; 01 CARABINA 556 Imbel; 01 FUZIL ARAD | MUNI√á√ïES: 100 UNIDCAL. 556 CBC, 50 UNID GALGE 12. LETAL E 12 ANTI-MOTIM, 250 UNID CAL 300"
var materialpadraoglobal = materiapadrao

let textoMATERIALCARGA =`| MATERIAL CARGA DISPONIVEL PARA O SERVI√áO - ARMAMENTO_APOIO: ${material === materiapadrao ? materiapadrao : material}`;


// quebra o texto automaticamente
let linhasTextoMATERIALCARGA = doc.splitTextToSize(textoMATERIALCARGA, largura-10);

// escreve o texto (ele j√° distribui nas linhas)
doc.text(linhasTextoMATERIALCARGA, iniciotextolinha, linha);
doc.text("07", 10, linha);

// ajusta a vari√°vel "linha" para depois do texto
linha += linhasTextoMATERIALCARGA.length * 3; // 2 = altura aproximada de cada linha


linha = linha+2
doc.line(coluna1, linha, coluna2, linha);
doc.line(coluna1+7, linha-6*3, coluna1+7, linha);


// FIM DO MATERIAL CARGA

// INICIO APREENSOES

linha = linha + 4;

let textoAPREENSOES =`| APREENS√ïES: ${apreensoes}`;


// quebra o texto automaticamente
let linhasTextoAPREENSOES = doc.splitTextToSize(textoAPREENSOES, largura);

// escreve o texto (ele j√° distribui nas linhas)
doc.text(linhasTextoAPREENSOES, iniciotextolinha, linha);
doc.text("08", 10, linha);

// ajusta a vari√°vel "linha" para depois do texto
linha += linhasTextoAPREENSOES.length * 3; // 2 = altura aproximada de cada linha


linha = linha+2
doc.line(coluna1, linha, coluna2, linha);
doc.line(coluna1+7, linha-6*3, coluna1+7, linha);


// FIM APREENSOES

// INICIO NOTIFICA√á√ïES

linha = linha + 4;

let textoNOTIFICACOES =`| NOTIFICA√á√ïES: ${notificacoes}`;


// quebra o texto automaticamente
let linhasTextoNOTIFICACOES = doc.splitTextToSize(textoNOTIFICACOES, largura -10);

// escreve o texto (ele j√° distribui nas linhas)
doc.text(linhasTextoNOTIFICACOES, iniciotextolinha, linha);
doc.text("09", 10, linha);

// ajusta a vari√°vel "linha" para depois do texto
linha += linhasTextoNOTIFICACOES.length * 3; // 2 = altura aproximada de cada linha


linha = linha+2
doc.line(coluna1, linha, coluna2, linha);
doc.line(coluna1+7, linha-6*3, coluna1+7, linha);

// FIM NOTIFICA√á√ïES

// INICIO APRESENTA√á√ïES EXTRA E OUTROS

linha = linha + 4;

let textoAPRESENTACOES=`| APRESENTA√á√ïES - EXTRAORDINARIA - OUTROS: ${apresentacoes}`;


// quebra o texto automaticamente
let linhasTextoAPRESENTACOES = doc.splitTextToSize(textoAPRESENTACOES, largura); 

// escreve o texto (ele j√° distribui nas linhas)
doc.text(linhasTextoAPRESENTACOES, iniciotextolinha, linha);
doc.text("10", 10, linha);

// ajusta a vari√°vel "linha" para depois do texto
linha += linhasTextoAPRESENTACOES.length * 3; // 2 = altura aproximada de cada linha


linha = linha+2
doc.line(coluna1, linha, coluna2, linha);
doc.line(coluna1+7, linha-6*3, coluna1+7, linha);


// FIM APRESENTA√á√ïES EXTRA E OUTROS


// INICIO OBSERVA√á√ïES

linha = linha + 4;

let textoOBS =`| OBSERVA√á√ïES: ${observacoes}`;


// quebra o texto automaticamente
let linhasTextoOBS = doc.splitTextToSize(textoOBS, largura);

// escreve o texto (ele j√° distribui nas linhas)
doc.text(linhasTextoOBS, iniciotextolinha, linha);
doc.text("11", 10, linha);

// ajusta a vari√°vel "linha" para depois do texto
linha += linhasTextoOBS.length * 4; // 2 = altura aproximada de cada linha


linha = linha+2
doc.line(coluna1, linha, coluna2, linha);
doc.line(coluna1+7, linha-6*4, coluna1+7, linha);


// FIM OBSERVA√á√ïES


// INICIO PASSAGEM DE SERVI√áO 

linha = linha + 4;

let textoPASSAGENDESERVICO =`| PASSAGEM DE SERVI√áO: ${passagem_texto}`;


// quebra o texto automaticamente
let linhasTextoPASSAGENDESERVICO = doc.splitTextToSize(textoPASSAGENDESERVICO, largura -10);

// escreve o texto (ele j√° distribui nas linhas)
doc.text(linhasTextoPASSAGENDESERVICO, iniciotextolinha, linha);
doc.text("12", 10, linha);
// ajusta a vari√°vel "linha" para depois do texto
linha += linhasTextoPASSAGENDESERVICO.length * 3; // 2 = altura aproximada de cada linha


linha = linha+2
doc.line(coluna1, linha, coluna2, linha);
doc.line(coluna1+7, linha-6*3, coluna1+7, linha);


// FIM PASSAGEM DE SERVI√áO 


// INICIO ASSINATURA DO CMT GUSV
linha = linha + 20

doc.line(coluna1 + 50, linha, coluna2 - 50, linha);


doc.setFont("helvetica", "bold");

linha = linha + 4;

doc.text(`${textoSelecionadoCmtsv}`, 105, linha, { align: "center" });
linha = linha + 4;
doc.text("GRADUADO DE DIA", 105, linha, { align: "center" });

// FIM ASSINATURA DO CMT GUSV



doc.setFontSize(12);
      

     

      // Gera o download
     // doc.save(`SERVI√áO DO DIA ${dataFormatada.toUpperCase()} - ${diaSemana.toUpperCase()} PARA O DIA ${dataFormatadafim.toUpperCase()} - ${diaSemanafim.toUpperCase()}.pdf`);

const agora = new Date();
const hora = String(agora.getHours()).padStart(2, '0');
const minuto = String(agora.getMinutes()).padStart(2, '0');
const segundo = String(agora.getSeconds()).padStart(2, '0');

const nomeArquivo = `SERVI√áO DO DIA ${dataFormatada.toUpperCase()} - ${diaSemana.toUpperCase()} PARA O DIA ${dataFormatadafim.toUpperCase()} - ${diaSemanafim.toUpperCase()} - ${hora}${minuto}${segundo}.pdf`;

doc.save(nomeArquivo);





    }
  </script>



<!--FIM PDF-->






        </form>
      </section>

      <section id="audiencia" class="content">
        <h2>Audi√™ncia</h2>
        <p>Cadastro de audi√™ncia do efetivo.</p>
        <form>
          <label for="select-nomes">Selecione o Militar:</label>
          <select id="select-nomes">
            <option value="">Carregando...</option>
          </select>
          <br><br>

          <label>Data:</label>
          <input type="date"><br><br>

          <label>Descri√ß√£o:</label><br>
          <input type="text"><br><br>

          <div class="form-buttons">
            <button type="button">Novo</button>
            <button type="button">Editar</button>
            <button type="button">Excluir</button>
            <button type="submit">Salvar</button>
          </div>
        </form>








      </section>
    </main>

    <footer>
      <p>&copy; 2025 Sis-GRO-PMMT</p>
    </footer>

    <!-- Script para preencher datas automaticamente -->
    <script>
      (function () {
        function fmtLocalDate(d) {
          const y = d.getFullYear();
          const m = String(d.getMonth() + 1).padStart(2, '0');
          const day = String(d.getDate()).padStart(2, '0');
          return `${y}-${m}-${day}`;
        }

        window.addEventListener('DOMContentLoaded', function () {
          const hoje   = new Date();
          const ontem  = new Date(hoje.getFullYear(), hoje.getMonth(), hoje.getDate() + 1);
          const amanha = new Date(hoje.getFullYear(), hoje.getMonth(), hoje.getDate() + 2);

          const dataInicio = document.getElementById('data_inicio'); // ontem
          const dataFim    = document.getElementById('data_fim');    // amanh√£
          const dataLivro  = document.getElementById('datalivro');   // hoje

          if (dataInicio && !dataInicio.value) dataInicio.value = fmtLocalDate(ontem);
          if (dataFim && !dataFim.value)       dataFim.value    = fmtLocalDate(amanha);
          if (dataLivro && !dataLivro.value)   dataLivro.value  = fmtLocalDate(amanha);
        });
      })();
    </script>

  <script>
    // Lista √∫nica de militares
    const militares = [
      { posto: "1¬∫ SGT PM", qra: "BRUNO", nome: "ANGELO MARCIO PRADO BRUNO", rgpm: "880.298" },
      { posto: "2¬∫ SGT PM", qra: "BROLEZI", nome: "BROLEZI", rgpm: "882.309" },
      { posto: "3¬∫ SGT PM", qra: "CAMPOS", nome: "ALLAN CARLOS CAMPOS", rgpm: "886.601" },
      { posto: "CB PM", qra: "ROBERT", nome: "GUSTAVO ROBERT DE OLIVEIRA", rgpm: "885.812" },
      { posto: "CB PM", qra: "JOSIMAR", nome: "JOSIMAR PEREIRA DA COSTA", rgpm: "886.222" },
      { posto: "CB PM", qra: "R. SOUZA", nome: "RICARDO DA SILVA SOUZA", rgpm: "885.860" },
      { posto: "CB PM", qra: "SOUZA", nome: "GUILHERME SOUZA SILVA", rgpm: "885.916" },
      { posto: "CB PM", qra: "THIAGO", nome: "ELEILTON THIAGO", rgpm: "886.613" },
      { posto: "SD PM", qra: "BRUNA", nome: "BRUNA ASSIS", rgpm: "886.605" },
      { posto: "SD PM", qra: "LOBO", nome: "EDSON BRUNO MARTINS LOBO", rgpm: "886.612" },
      { posto: "CB PM", qra: "DOUGLAS", nome: "DOUGLAS BEZERRA DE OLIVEIRA", rgpm: "887.192" }
    ];

    // Preenche todos os selects que usam a classe "lista-militares"
    document.querySelectorAll("select.lista-militares").forEach(select => {
      militares.forEach(militar => {
        const opt = document.createElement("option");

        // O que aparece na lista
        opt.textContent = `${militar.posto} ${militar.qra} - RGPM ${militar.rgpm}`;

        // O que √© salvo no formul√°rio (aqui s√≥ o QRA)
        opt.value = militar.qra;

        select.appendChild(opt);
      });
      });
  </script>



<!--// comeco do script externo copiado aqui-->
    <script>
    const menuToggle = document.getElementById('mobile-menu');
  const navList = document.querySelector('.nav-list');

  menuToggle.addEventListener('click', () => {
    navList.classList.toggle('active');
  });

  document.querySelectorAll('.nav-list a').forEach(link => {
    link.addEventListener('click', e => {
      e.preventDefault();
      const sectionId = link.getAttribute('data-section');

      document.querySelectorAll('main .content').forEach(sec => {
        sec.classList.remove('active');
      });

      document.getElementById(sectionId).classList.add('active');

      navList.classList.remove('active');
    });
  });

  const loginOverlay = document.getElementById('login-overlay');
  const logoutBtn = document.getElementById('logout-btn');
  const body = document.body;

  function fazerLogin() {
    const userInput = document.getElementById('login-user').value.trim();
    const passInput = document.getElementById('login-pass').value.trim();
    const errorDiv = document.getElementById('login-error');

    if(userInput === 'pmmt' && passInput === '@2025pmmt') {
      errorDiv.textContent = '';
      loginOverlay.style.display = 'none';
      body.classList.remove('locked');

      // Salvar status de login
      localStorage.setItem('logado', 'true');
      logoutBtn.style.display = 'block';
    } else {
      errorDiv.textContent = 'Usu√°rio ou senha incorretos.';
    }
  }

  function logout() {
    localStorage.removeItem('logado');
    loginOverlay.style.display = 'flex';
    body.classList.add('locked');
    logoutBtn.style.display = 'none';

    // Limpar campos de login
    document.getElementById('login-user').value = '';
    document.getElementById('login-pass').value = '';
    document.getElementById('login-error').textContent = '';
  }

  // Checar login ao carregar a p√°gina
  window.addEventListener('load', () => {
    if(localStorage.getItem('logado') === 'true') {
      loginOverlay.style.display = 'none';
      body.classList.remove('locked');
      logoutBtn.style.display = 'block';
    } else {
      loginOverlay.style.display = 'flex';
      body.classList.add('locked');
      logoutBtn.style.display = 'none';
    }
  });

  // Permitir login ao pressionar Enter
  document.getElementById('login-pass').addEventListener('keyup', function(event) {
    if(event.key === 'Enter') {
      fazerLogin();
    }
  });
  document.getElementById('login-user').addEventListener('keyup', function(event) {
    if(event.key === 'Enter') {
      fazerLogin();
    }
  });






  // Fun√ß√£o para carregar efetivo.html e preencher select
  async function carregarEfetivo() {
    try {
      const response = await fetch('efetivo.html');
      const text = await response.text();

      // Criar DOM tempor√°rio para manipular o HTML carregado
      const parser = new DOMParser();
      const doc = parser.parseFromString(text, 'text/html');

      // Pegar as linhas da tabela
      const rows = doc.querySelectorAll('#tabela-efetivo tbody tr');

      const select = document.getElementById('select-nomes');
      select.innerHTML = ''; // limpa as op√ß√µes

      rows.forEach(row => {
        const nome = row.cells[0].textContent.trim();
        // Pode usar o nome como value e texto da option
        const option = document.createElement('option');
        option.value = nome;
        option.textContent = nome;
        select.appendChild(option);
      });

    } catch (err) {
      console.error('Erro ao carregar efetivo:', err);
      const select = document.getElementById('select-nomes');
      select.innerHTML = '<option>Erro ao carregar nomes</option>';
    }
  }

  // Chama a fun√ß√£o ap√≥s carregar a p√°gina
  window.addEventListener('load', carregarEfetivo);

    </script>

    



<!-- inicio do store-->

<script>
  (function () {
    const formId = "livrodiario";
    const storageKey = "form_livrodiario";

    // Salvar no localStorage sempre que algo for alterado
    function salvarAutomaticamente() {
      const form = document.querySelector(`#${formId} form`);
      const dados = {};

      form.querySelectorAll("input, select, textarea").forEach(el => {
        if (el.id) {
          dados[el.id] = el.value;
        }
      });

      localStorage.setItem(storageKey, JSON.stringify(dados));
    }

    // Carregar dados salvos e preencher campos
    function restaurarFormulario() {
      const dadosSalvos = localStorage.getItem(storageKey);
      if (!dadosSalvos) return;

      const dados = JSON.parse(dadosSalvos);
      for (const id in dados) {
        const el = document.getElementById(id);
        if (el) {
          el.value = dados[id];
        }
      }
    }

    // Monitorar todos os campos
    function monitorarCampos() {
      const form = document.querySelector(`#${formId} form`);
      form.querySelectorAll("input, select, textarea").forEach(el => {
        el.addEventListener("input", salvarAutomaticamente);
        el.addEventListener("change", salvarAutomaticamente);
      });
    }

// reset inicio
function resetarFormularioParaOriginal() {
  // Nome da chave usada no localStorage
  const storageKey = "form_livrodiario";

  // Remove os dados salvos
  localStorage.removeItem(storageKey);

  // Pega o formul√°rio
  const form = document.querySelector("#livrodiario form");

  // Reseta os campos para os valores originais definidos no HTML
  form.reset();

  // Se quiser recarregar a p√°gina para for√ßar o DOMContentLoaded a rodar de novo:
  // location.reload();  // (opcional)
}

// reset fim 



    // Criar bot√£o de resetar
    function criarBotaoResetar() {
      const form = document.querySelector(`#${formId} form`);
      const botao = document.createElement("button");
      botao.textContent = "Resetar para Original";
      botao.type = "button";
      botao.style.marginLeft = "10px";
      botao.style.backgroundColor = "#dc3545";
      botao.style.border = "none";
      botao.style.padding = "10px 20px";
      botao.style.borderRadius = "4px";
      botao.style.color = "white";
      botao.style.cursor = "pointer";

     // botao.addEventListener("click", () => {
       // if (confirm("Tem certeza que deseja limpar o formul√°rio e restaurar o estado original?")) {
        //  localStorage.removeItem(storageKey);
         // location.reload();
       // }
      //});


botao.addEventListener("click", () => {
  if (confirm("Tem certeza que deseja limpar o formul√°rio e restaurar o estado original?")) {
    resetarFormularioParaOriginal(); // üëà agora chamando a fun√ß√£o corretamente
  }
});


      form.querySelector("button[type='submit']").after(botao);
    }

    // Executar tudo ao carregar
    window.addEventListener("DOMContentLoaded", () => {
      restaurarFormulario();
      monitorarCampos();
      criarBotaoResetar();
      
    });
  })();
</script>



<!-- fim do store-->


  </body>
  </html>

